# CPU의 ALU와 제어장치
- ALU(산술 논리 연산 장치)
    - 입력:
        - 레지스터로부터 피연산자를 받음
        - 제어장치로부터 수행할 연산을 알려주는 제어 신호를 받음
    - 연산 수행:
        - 산술 연산, 논리 연산(AND,OR,XOR등)
    - 출력: 연산 결과, 플래그 값(연산 결과의 상태 정보)
    - 플래그 종류
        - 부호 플래그: 양수/음수 구분
        - 제로 플래그: 연산 결과 0 구분
        - 캐리 플래그: 덧셈 시 자리 올림 발생 여부
        - 오버플로우 플래그: 연산 결과가 레지스터 크기를 초과하는 경우
        - 슈퍼바이저 플래그: 시스템의 특권 모드 여부

        - 플래그 저장 -> 플래그 레지스터

- 제어 장치
    - 기능: 명령어 해석 및 실행 순서 제어/ CPU 내부 및 외부에 제어 신호 출력

    - 입력
        - 클럭 신호: 컴퓨터의 모든 부품을 동기화하는 역할
        - 명령어: 명령어 레지스터에 저장된 명령어
        - 플래그 값: 플래그 레지스터의 상태 값
        - 제어 신호: 제어 버스를 통해 전달된 신호
    - 출력
        - CPU 내/외 부로 전달되는 제어 신호
- 레지스터 종류
    1. 프로그램 카운터 (PC, Program Counter)
        - 메모리에서 가져올 명령어의 주소 저장
        - 일부 CPU에서는 "명령어 카운터"라고도 부름

    2. 명령어 레지스터 (IR, Instruction Register)
        - 해석할 명령어를 저장
    3. 메모리 주소 레지스터 (MAR, Memory Address Register)
        -  메모리의 주소 저장

    4. 메모리 버퍼 레지스터 (MBR, Memory Buffer Register, 메모리 데이터 레지스터)
        - 메모리와 주고받을 데이터를 저장
    5. 범용 레지스터 (General-Purpose Register)
        - 일반적인 연산에서 자유롭게 사용
    6. 플래그 레지스터 (Flag Register)
        - ALU 연산 결과에 따른 플래그 값을 저장
    7. 스택 포인터 (SP, Stack Pointer)
        - 스택의 최상단 위치를 저장
        - 스택 주소 지정 방식: 스택과 스택 포인터를 활용하여 주소 지정
    8. 베이스 레지스터 (Base Register)
        - 기준 주소 저장
        - 오퍼랜드: 기준 주소로부터의 상대적 거리

- 주소 지정 방식
    1. 변위 주소 지정 방식:
        - 오퍼랜드 필드의 값과 특정 레지스터의 값을 더해 유효 주소 추출
    2. 상대 주소 지정 방식:
        - 오퍼랜드와 프로그램 카운터(PC)의 값을 더해 유효 주소 추출
    3. 베이스 레지스터 지정 방식:
        - 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소 추출

- 명령어 사이클: CPU가 명령어를 처리하는 정형화된 흐름
    1. 인출 사이클 (Fetch Cycle):
        - 명령어를 메모리에서 CPU로 가져옴
    2. 실행 사이클 (Execute Cycle):
        - CPU가 명령어를 실행
    3. 간접 사이클 (Indirect Cycle):
        - 명령어를 인출했지만 추가적인 메모리 접근이 필요한 경우
    4. 인터럽트 사이클 (Interrupt Cycle):
        - 인터럽트 발생 시 처리
            - 인터럽트: CPU의 정상적인 작업을 방해하는 신호
            - 종류
                - 동기 인터럽트: CPU 내부에서 발생하는 인터럽트(예외,Fault, Trap, Abort 등)
                - 비동기 인터럽트: 입출력 장치에서 발생하는 인터럽트 (하드웨어 인터럽트)
                - 하드웨어 인터럽트 처리 과정
                    1. 입출력 장치 -> CPU에 인터럽트 요청신호 전송
                    2. CPU는 실행 사이클 종료 후 인터럽트 여부 확인
                    3. 인터럽트 요청을 수용할지 인터럽트 플래그로 판단
                    4. 인터럽트 수용하면 현재 작업을 백업
                    5. 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴(ISR)실행
                    6. 인터럽트 서비스 루틴(ISR) 실행 종료 후 백업한 작업을 복원하고 실행 재개
                - 예외(Exception) 종류
                    1. 폴트(Fault): 예외 처리 후 예외 발생한 명령어부터 실행 재개(ex.페이지 폴트)
                    2. 트랩: 예외 처리 후 예외 발생한 명령어의 다음 명령어부터 실행 재개(ex. 시스템 호출)
                    3. 중단(Abort): CPU가 실행 중인 프로그램을 강제로 중단해야 하는 심각한 오류(ex. 하드웨어 고장)
                    4. 소프트웨어 인터럽트: 시스템 호출 발생 시 나타나는 인터럽트


